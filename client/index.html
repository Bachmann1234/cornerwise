<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="City of Somerville planning reports and capital projects">
    <link rel="icon" type="image/png" href="/static/images/favicon.png" />

    <title>Cornerwise</title>
    <script data-main="/static/scripts/main" src="/static/scripts/require.js"></script>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <link rel="stylesheet" href="/static/css/app.css" type="text/css" media="screen" />

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Find and explore nearby zoning applications."/>
    <meta name="keywords" content="civic engagement,code for america,code for boston,,development,planning,planning boardmurban planning,zoning,zoning board" />
    <!-- OpenGraph -->
    <meta name="og:type" content="website" />
    <meta name="og:image" content="/static/images/cornerwise-beta-logo.png" />


    <!-- Template for proposals in the proposal table -->
    <script type="text/template" id="proposal-template">
      <div class="icon">
        <img src="<%- proposal.getThumb() %>"/>
      </div>
      <div class="name" title="<%- proposal.get('address') %>">
        <%- proposal.get('address') %>
      </div>
      <div class="case"><%- proposal.get("caseNumber") %></div>
      <div class="subtitle">
        <%- proposal.getAttributeValue("applicant_name") || '' %>
      </div>
      <div class="summary">
        <%- proposal.get("summary") %>
      </div>
      <div class="distance"><%= prettyDistance(proposal.get('refDistance')) %> away</div>
    </script>



    <script type="text/template" id="proposal-details">
      <div class="details">
        <a href="#" class="close">Close</a>
        <h4>
          <div class="minimap"></div>
          <%- proposal.address %>
        </h4>
        <div class="case-number"><%- proposal.caseNumber %></div>

        <% if (proposal.attributes && proposal.attributes.length) { %>
        <table class="attributes section table">
          <% _.each(proposal.attributes, function(attr) { %>
          <tr class="attribute">
            <th scope="row"><%- attr.name %>:</th>
            <td><%- attr.value %></td>
          </tr>
          <% }); %>
        </table>
        <% } %>

        <% if (proposal.documents && proposal.documents.length) { %>
        <div class="documents section">
          <div class="section-title">Documents</div>
          <% _.each(proposal.documents.slice(0, 10), function(doc) { %>
          <a class="document" href="<%= doc.url %>" target="_blank">
            <% if (doc.thumb) { %>
            <img class="thumb" src="<%- doc.thumb %>"/>
            <% } else { %>
            <div class="dummy-thumb thumb">Doc</div>
            <% } %>
            <div class="title"><%- doc.title %></div>
          </a>
          <% }); %>
        </div>
        <% } %>

        <% if (proposal.images && proposal.images.length) { %>
        <div class="images section">
          <div class="section-title">Images</div>
          <% _.each(proposal.images.slice(0, 10), function(img) { %>
          <a class="thumb-link" href="<%= img.src %>" target="_blank">
            <img class="thumb" src="<%= img.thumb || img.src %>"/>
          </a>
          <% }); %>
        </div>
        <% } %>

        <% if (proposal.parcel) { %>
        <% with(proposal.parcel) { %>
        <div class="section">
          <div class="section-title">
            Parcel
          </div>

          <table class="table">
            <tr>
              <td>Lot Size:</td>
              <td><%- properties.LOT_SIZE %> acres</td>
            </tr>
            <tr>
              <td>Residential Area</td>
              <td><%- commas(properties.RES_AREA) %> square feet</td>
            </tr>
          </table>
        </div>
        <% } %>
        <% } %>
      </div>
    </script>

    <script type="text/template" id="project-details">

    </script>

    <script type="text/template" id="project-template">
      <div class="icon">
        <img src="<%- project.thumbnail() %>">
      </div>
      <div class="name" title="<%- project.get('name') %>">
        <%- project.get("name") %>
      </div>
      <div class="category" title="<%- project.get('category') %>">
        <img src="<%- project.categoryIcon() %>"/>
      </div>
      <div class="department"><%- project.get("department") %></div>
      <div class="time-span"></div>
      <div class="status">
        <div class="<%- project.get('approved') ? 'approved' : 'pending' %>"/>
      </div>
      <div class="budget-year">
        <% var years = project.yearRange();
           if (years[0] == years[1]) {
        %>
        <%= years[0] %>
        <% } else { %>
        <%= years[0] %>&ndash;<%= years[1] %>
        <% } %>
      </div>
      <div class="budget">
        <%- prettyAmount(project.totalBudget()) %>
      </div>
    </script>

    <script type="text/template" id="proposal-preview-template">
      <div>
        <img src="<%- proposal.getThumb() %>" class="thumb"/>
        <h3 class="address"><%- proposal.get("address") %></h3>
        <div class="case-number"><%- proposal.get("caseNumber") %></div>
        <div class="applicant">
          <%
             var applicant = proposal.getAttributeValueOrFetch("applicant_name"),
             notice = proposal.getAttributeValue("legal_notice"),
             owner = proposal.getAttributeValue("owner_name");
             if (applicant) {
             %>
          <div class="applicant-name"><%- applicant %></div>
          <% }
             if (owner) {
             %>
          <div class="applicant-name"><%- owner %></div>
          <%
             }
             if (notice) {
             %>
          <div class="legal-notice"><%= gloss(abridge(notice)) %></div>
          <% } %>
        </div>
        <div id="details-minimap"></div>

        <div class="controls">
          <a class="more" href="#">View more&hellip;</a>
          <a class="calendar" aria-label="View related event" href="#">
            <img src="/static/images/calendar.png">
          </a>
        </div>
      </div>
    </script>

    <script type="text/template" id="project-preview-template">
      <h3><%- project.get("name") %></h3>
      <div class="category"><%- project.get("category") %></div>
      <div class="department"><%- project.departmentName() %></div>
      <div class="desription">
        Making the City’s streets and sidewalks safe and accessible to everyone is a top priority. Given Somerville’s density, city streets and sidewalks are heavily utilized and thus require frequent maintenance. The City must continually invest in this infrastructure to ensure that all pedestrians, motorists, and cyclists can maneuver through the city safely and efficiently. As of 2012, the City’s backlog of street repair work totaled $46.6 million and its backlog of sidewalk repair work totaled $75.1 million.
      </div>

      <strong>Budget:</strong>
      <canvas class="budget-chart" height="200" width="300"></canvas>
    </script>

    <script type="text/template" id="layer-item-template">
      <input type="checkbox"
             name="<%- layer.id %>"
             id="<%- layer.id %>-layer"
             <% if (layer.shown) { %>checked<% } %>/>
      <label class="title" for="<%- layer.id %>-layer">
        <%- layer.title %>
      </label>
      <a href="#" class="color" style="background-color: <%- layer.color %>"/>
    </script>

  </head>
  <body class="main">
    <div id="alert-container"><div id="alert"></div></div>
    <div id="map-container">
      <div id="map"></div>
      <div id="minimap-container">
        <a href="#" class="reset">↺</a>
        <div id="minimap"></div>
      </div>

      <!-- container for preview of selected proposal/project -->
      <div id="preview"></div>

      <!-- container for detail view -->
      <div id="overlay"></div>
    </div>

    <div id="layers" class="collapsed _collapsible">
      <div class="controls">
        <a href="#" class="_expand when-collapsed"></a>
        <a href="#" class="_collapse when-expanded"></a>
      </div>
      <div class="contents">

      </div>
    </div>

    <div id="modal"></div>

    <div id="search-banner" class="overlay">
      <div id="logo" class="resp-portrait-hide"></div>
      <div class="overlay-contents">
        <h3>what&rsquo;s being built near&hellip;</h3>
        <div class="input-group big-input">
          <form id="ref-address-form">
            <input class="input" type="text" name="address" placeholder="enter address" autocomplete="off" autofocus/>
            <img src="/static/images/geolocating.gif" class="status" alt="searching" />
            <button type="submit" class="input-button go-button">go</button>
          </form>
        </div>
      </div>
      <a id="geolocate" href="#">Near Me</a>
      <a id="explore" href="#">Explore the Data</a>
    </div>

    <div id="menu">
      <a id="menu-button" class="button big" href="#">
        <span class="icon" aria-hidden="true">≡</span>
        <span class="resp-portrait-hide">MENU</span>
      </a>
    </div>

    <div id="data" class="collapsed _collapsible">
      <div id="data-controls">
        <a href="#" id="expand-data" class="_expand when-collapsed">Explore &larr;</a>
        <a href="#" id="collapse-data" class="_collapse when-expanded">Hide &rarr;</a>
      </div>
      <div class="tabs"></div>
      <div class="tab-pane">
      </div>
    </div>



    <div id="intro" class="overlay">
      <div class="section">
        <h3>PLANNING AND ZONING</h3>

        <ul>
          <li>current building projects</li>
          <li>building requests</li>
          <li>variances</li>
          <li>schedule of public hearings</li>
        </ul>

        <div class="more">
          <a href="#">Learn more</a>
        </div>
      </div>
      <div class="section">
        <h3>CITY INITIATIVES</h3>

        <div class="lede">

        </div>
      </div>
      <div class="section">
        <div class="logos">
          <a href="https://github.com/cityofsomerville/cornerwise">
            <img src="/static/images/logo/github-light.png">
          </a>
          <a href="http://codeforboston.org" title="Code for Boston">
            <img src="http://stage.codeforboston.org/img/code_for_boston_logo.png" alt="Code for Boston" />
        </div>
        </a>
      </div>
    </div>

    <div id="controls" class="overlay">
      <div class="section">
        <h3>FILTER</h3>
        <a href="#" class="filter-button">Project Type</a>
        <a href="#" class="filter-button">Something Else</a>
        <a href="#" class="filter-button">Impact</a>
      </div>
      <div class="section">

      </div>
      <div id="signup" class="section">
        <!-- <span class="resp-portrait-hide"> -->
        <!--   Sign up for alerts near this address: -->
        <!-- </span> -->
        <a id="subscribe" class="big button">SUBSCRIBE</a>
        <!-- <div class="input-group"> -->

        <!-- <input class="input" type="text" name="address" placeholder="enter email" /> -->
        <!-- <button class="input-button go-button">go</button> -->
        <!-- </div> -->
      </div>
    </div>

    <script src="https://use.typekit.net/wpe7mmw.js"></script>
    <script type="text/javascript">
      try{Typekit.load({ async: true });}catch(e){}
    </script>
  </body>
</html>
